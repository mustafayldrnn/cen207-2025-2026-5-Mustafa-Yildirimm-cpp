\doxysection{hash\+\_\+table.\+h}
\hypertarget{hash__table_8h_source}{}\label{hash__table_8h_source}\index{C:/Users/ahmet/OneDrive/Masa端st端/DataStructure/cen207-\/2025-\/2026-\/5-\/Mustafa-\/Yildirimm-\/cpp/include/ds/hash\_table.h@{C:/Users/ahmet/OneDrive/Masa端st端/DataStructure/cen207-\/2025-\/2026-\/5-\/Mustafa-\/Yildirimm-\/cpp/include/ds/hash\_table.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{namespace\ }ds\ \{}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{enum\ class}\ SlotState\ \{\ Empty,\ Occupied,\ Deleted\ \};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ V>}
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }HashTable\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keyword}{struct\ }Entry\ \{\ K\ key;\ V\ value;\ SlotState\ state\ =\ SlotState::Empty;\ \};}
\DoxyCodeLine{00014\ \ \ \ \ std::vector<Entry>\ table\_;}
\DoxyCodeLine{00015\ \ \ \ \ std::size\_t\ count\_\ =\ 0;}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordtype}{float}\ max\_load\_\ =\ 0.7f;}
\DoxyCodeLine{00017\ \ \ \ \ std::hash<K>\ hasher\_\{\};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ std::size\_t\ idx(\textcolor{keyword}{const}\ K\&\ k)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ hasher\_(k)\ \&\ (table\_.size()\ -\/\ 1);\ \}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{void}\ rehash(std::size\_t\ new\_cap)\{}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ std::vector<Entry>\ old\ =\ std::move(table\_);}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ table\_.assign(new\_cap,\ Entry\{\});\ count\_\ =\ 0;}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ e\ :\ old)\{\ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Occupied)\ insert(e.key,\ e.value);\ \}}
\DoxyCodeLine{00024\ \ \ \ \ \}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{void}\ ensure()\{\ \textcolor{keywordflow}{if}\ (count\_\ +\ 1\ >\ \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(max\_load\_\ *\ table\_.size()))\ rehash(table\_.size()<<1);\ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{explicit}\ HashTable(std::size\_t\ cap\ =\ 16)\{\ std::size\_t\ c=1;\ \textcolor{keywordflow}{while}(c<cap)\ c<<=1;\ table\_.assign(c,\ Entry\{\});\ \}}
\DoxyCodeLine{00029\ \ \ \ \ std::size\_t\ size()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ count\_;\ \}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{bool}\ empty()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ count\_==0;\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{bool}\ insert(\textcolor{keyword}{const}\ K\&\ k,\ \textcolor{keyword}{const}\ V\&\ v)\{\ ensure();\ std::size\_t\ i\ =\ idx(k);\ std::size\_t\ first\_del\ =\ table\_.size();}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{\ \textcolor{keyword}{auto}\&\ e\ =\ table\_[i];\ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Empty)\{\ \textcolor{keywordflow}{if}\ (first\_del\ !=\ table\_.size())\ \{\ table\_[first\_del]\ =\ \{k,v,SlotState::Occupied\};\ \}\ \textcolor{keywordflow}{else}\ \{\ e\ =\ \{k,v,SlotState::Occupied\};\ \}\ ++count\_;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Deleted)\{\ \textcolor{keywordflow}{if}\ (first\_del\ ==\ table\_.size())\ first\_del\ =\ i;\ \}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (e.key\ ==\ k)\{\ e.value\ =\ v;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ i\ =\ (i\ +\ 1)\ \&\ (table\_.size()-\/1);}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ V*\ find(\textcolor{keyword}{const}\ K\&\ k)\{\ std::size\_t\ i\ =\ idx(k);\ \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{\ \textcolor{keyword}{auto}\&\ e\ =\ table\_[i];\ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Empty)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Occupied\ \&\&\ e.key\ ==\ k)\ \textcolor{keywordflow}{return}\ \&e.value;\ i\ =\ (i\ +\ 1)\ \&\ (table\_.size()-\/1);\}\ \}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{const}\ V*\ find(\textcolor{keyword}{const}\ K\&\ k)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}HashTable*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>find(k);\ \}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{bool}\ contains(\textcolor{keyword}{const}\ K\&\ k)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ find(k)\ !=\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{bool}\ erase(\textcolor{keyword}{const}\ K\&\ k)\{\ std::size\_t\ i\ =\ idx(k);\ \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{\ \textcolor{keyword}{auto}\&\ e\ =\ table\_[i];\ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Empty)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{keywordflow}{if}\ (e.state\ ==\ SlotState::Occupied\ \&\&\ e.key\ ==\ k)\{\ e.state\ =\ SlotState::Deleted;\ -\/-\/count\_;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}\ i\ =\ (i\ +\ 1)\ \&\ (table\_.size()-\/1);\}\ \}}
\DoxyCodeLine{00044\ \};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \}\ \textcolor{comment}{//\ namespace\ ds}}
\DoxyCodeLine{00047\ }

\end{DoxyCode}

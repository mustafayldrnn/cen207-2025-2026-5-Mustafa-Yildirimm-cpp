\doxysection{heap.\+h}
\hypertarget{heap_8h_source}{}\label{heap_8h_source}\index{C:/Users/ahmet/OneDrive/Masa端st端/DataStructure/cen207-\/2025-\/2026-\/5-\/Mustafa-\/Yildirimm-\/cpp/include/ds/heap.h@{C:/Users/ahmet/OneDrive/Masa端st端/DataStructure/cen207-\/2025-\/2026-\/5-\/Mustafa-\/Yildirimm-\/cpp/include/ds/heap.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{namespace\ }ds\ \{}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Compare\ =\ std::less<T>>}
\DoxyCodeLine{00008\ \textcolor{keyword}{class\ }BinaryHeap\ \{}
\DoxyCodeLine{00009\ \ \ \ \ std::vector<T>\ a\_;}
\DoxyCodeLine{00010\ \ \ \ \ Compare\ cmp\_\{\};}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keywordtype}{void}\ sift\_up(std::size\_t\ i)\{}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (i>0)\{\ std::size\_t\ p=(i-\/1)/2;\ \textcolor{keywordflow}{if}\ (!cmp\_(a\_[p],\ a\_[i]))\ \textcolor{keywordflow}{break};\ std::swap(a\_[p],\ a\_[i]);\ i=p;\ \}}
\DoxyCodeLine{00013\ \ \ \ \ \}}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordtype}{void}\ sift\_down(std::size\_t\ i)\{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ std::size\_t\ n\ =\ a\_.size();}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{\ std::size\_t\ l=2*i+1,\ r=2*i+2,\ m=i;\ \textcolor{keywordflow}{if}\ (l<n\ \&\&\ cmp\_(a\_[m],\ a\_[l]))\ m=l;\ \textcolor{keywordflow}{if}\ (r<n\ \&\&\ cmp\_(a\_[m],\ a\_[r]))\ m=r;\ \textcolor{keywordflow}{if}\ (m==i)\ \textcolor{keywordflow}{break};\ std::swap(a\_[i],\ a\_[m]);\ i=m;\ \}}
\DoxyCodeLine{00017\ \ \ \ \ \}}
\DoxyCodeLine{00018\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordtype}{bool}\ empty()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ a\_.empty();\ \}}
\DoxyCodeLine{00020\ \ \ \ \ std::size\_t\ size()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ a\_.size();\ \}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keyword}{const}\ T\&\ top()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ a\_.front();\ \}}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{void}\ push(\textcolor{keyword}{const}\ T\&\ v)\{\ a\_.push\_back(v);\ sift\_up(a\_.size()-\/1);\ \}}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{void}\ pop()\{\ std::swap(a\_.front(),\ a\_.back());\ a\_.pop\_back();\ \textcolor{keywordflow}{if}(!a\_.empty())\ sift\_down(0);\ \}}
\DoxyCodeLine{00024\ \ \ \ \ std::vector<T>\ heap\_sort\_copy()\textcolor{keyword}{\ const\ }\{\ \textcolor{keyword}{auto}\ b=a\_;\ std::vector<T>\ out;\ out.reserve(b.size());\ \textcolor{keyword}{auto}\ cmp=cmp\_;\ \textcolor{keyword}{auto}\ sift\_down=[\&](std::size\_t\ i)\{\ std::size\_t\ n=b.size();\ \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{\ std::size\_t\ l=2*i+1,r=2*i+2,m=i;\ \textcolor{keywordflow}{if}(l<n\&\&cmp(b[m],b[l]))\ m=l;\ \textcolor{keywordflow}{if}(r<n\&\&cmp(b[m],b[r]))\ m=r;\ \textcolor{keywordflow}{if}(m==i)\ \textcolor{keywordflow}{break};\ std::swap(b[i],b[m]);\ i=m;\ \}\};\ \textcolor{keywordflow}{for}\ (std::size\_t\ i=b.size()/2;i-\/-\/>0;)\ sift\_down(i);\ \textcolor{keywordflow}{while}(!b.empty())\{\ std::swap(b.front(),\ b.back());\ out.push\_back(b.back());\ b.pop\_back();\ \textcolor{keywordflow}{if}(!b.empty())\ sift\_down(0);\}\ \textcolor{keywordflow}{return}\ out;\ \}}
\DoxyCodeLine{00025\ \};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \}\ \textcolor{comment}{//\ namespace\ ds}}
\DoxyCodeLine{00028\ }

\end{DoxyCode}
